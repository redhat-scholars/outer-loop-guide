<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: OpenShift Outer Loop Workshop</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/course-template/outer-loop/gitops-workflow.html">
    <link rel="prev" href="continuous-integration.html">
    <link rel="next" href="continuous-delivery.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../_/css/site.css">
<link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="https://redhat-scholars.github.io/course-template">OpenShift Outer Loop Workshop</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Books</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">CheatSheets</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">CheatSheet A</a>
            <a class="navbar-item" href="#">CheatSheet B</a>
            <a class="navbar-item" href="#">CheatSheet C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Upcoming Events</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Event A</a>
            <a class="navbar-item" href="#">Event B</a>
            <a class="navbar-item" href="#">Event C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Tutorial A</a>
            <a class="navbar-item" href="#">Tutorial B</a>
            <a class="navbar-item" href="#">Tutorial C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="outer-loop" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">OpenShift Outer Loop Workshop</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="introduction.html">1. Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="developer-workspace-outer-loop.html">2. Get your Developer Workspace</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="continuous-integration.html">3. Continuous Integration with Openshift Pipelines</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="gitops-workflow.html">4. GitOps Workflow with Argo CD</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="continuous-delivery.html">5. Continuous Delivery with Openshift Pipelines</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="service-mesh.html">6. Connect and Monitor your Application with OpenShift Service Mesh</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OpenShift Outer Loop Workshop</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">OpenShift Outer Loop Workshop</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OpenShift Outer Loop Workshop</a></li>
    <li><a href="gitops-workflow.html">4. GitOps Workflow with Argo CD</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-scholars/outer-loop-guide/edit/master/documentation/modules/ROOT/pages/gitops-workflow.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<div class="paragraph">
<p><em>20 MINUTE EXERCISE</em></p>
</div>
<div class="paragraph">
<p>In this lab you will learn about deploying and managing Kubernetes resources using a GitOps tool.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">GitOps Methodology</div>
<div class="paragraph">
<p><strong>GitOps</strong> is a set of practices that leverages Git workflows to manage infrastructure and application configurations.
By using Git repositories as the source of truth, it allows DevOps teams to store the entire state of the cluster configuration in Git
so that the trail of changes are visible and auditable.</p>
</div>
<div class="paragraph">
<p><strong>GitOps</strong> simplifies the propagation of infrastructure and application
configuration changes across multiple clusters by defining your infrastructure and applications definitions as “code”.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure that the clusters have similar states for configuration, monitoring, or storage.</p>
</li>
<li>
<p>Recover or recreate clusters from a known state.</p>
</li>
<li>
<p>Create clusters with a known state.</p>
</li>
<li>
<p>Apply or revert configuration changes to multiple clusters.</p>
</li>
<li>
<p>Associate templated configuration with different environments.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Gitops</strong> is also beneficial for application configuration management. It ensures consistency in applications when you deploy them to
different clusters in different environments, like development, stage, and production.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Promote applications across clusters, from stage to production.</p>
</li>
<li>
<p>Apply or revert application changes to multiple OpenShift Container Platform clusters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>OpenShift provides the flexibility to choose when and how you integrate GitOps methodology into your business practices and pipelines.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_export_openshift_resources"><a class="anchor" href="#_export_openshift_resources"></a>Export OpenShift Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, you need to export the project resources from OpenShift.</p>
</div>
<div class="paragraph">
<p>In your %CHE_URL%[Workspace^], <code><strong>click on 'Terminal' &#8594; 'Run Task&#8230;&#8203;' &#8594;  'GitOps - Export Coolstore'</strong></code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/che-runtask.png" alt="Che - RunTask" width="500">
</div>
</div>
<div class="paragraph">
<p>A terminal should be opened with the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">--- Export Kubernetes resources for GitOps from my-project%USER_ID% to cn-project%USER_ID% ---
Exporting resources for inventory-coolstore...
Exporting resources for catalog-coolstore...
Exporting resources for gateway-coolstore...
Exporting resources for web-coolstore...
--- Kubernetes resources has been exported! ---</code></pre>
</div>
</div>
<div class="paragraph">
<p>This operation exports the project resources (deploymentconfig, route, secret, service)
and cleans them up. As a result, you should have all resources in YAML files under
the <strong>/projects/workshop/labs/gitops</strong> folder.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/che-gitops-export-result.png" alt="Che - GitOps Export Result" width="300">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_git_repository_for_your_configuration"><a class="anchor" href="#_create_a_git_repository_for_your_configuration"></a>Create a Git Repository for Your Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The next step is to store all Kubernetes/OpenShift resources in
a source code repository.</p>
</div>
<div class="paragraph">
<p>In %GIT_URL%[Gitea^], <code><strong>create a new Repository</strong></code> as following:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. GitOps Repository</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Owner*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user%USER_ID%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repository Name*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">gitops-cn-project</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><code><strong>Click on 'Create Repository' button</strong></code>.</p>
</div>
<div class="paragraph">
<p>The Git repository is created now.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_push_the_configuration_of_inventory_service_into_the_git_repository"><a class="anchor" href="#_push_the_configuration_of_inventory_service_into_the_git_repository"></a>Push the Configuration of Inventory Service into the Git Repository</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you have a Git repository for the configuration, you should push it into this Git repository.</p>
</div>
<div class="paragraph">
<p>In your %CHE_URL%[Workspace^], <code><strong>click on 'Terminal' &#8594; 'Run Task&#8230;&#8203;' &#8594;  'GitOps - Commit Inventory'</strong></code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/che-runtask.png" alt="Che - RunTask" width="500">
</div>
</div>
<div class="paragraph">
<p>A terminal should be opened with the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">Initialized empty Git repository in /projects/workshop/labs/gitops/.git/
[master (root-commit) b066fd2] Initial Inventory GitOps
 6 files changed, 251 insertions(+)
 create mode 100644 inventory-coolstore-configmap.yaml
 create mode 100644 inventory-coolstore-deployment.yaml
 create mode 100644 inventory-coolstore-deploymentconfig.yaml
 create mode 100644 inventory-coolstore-route.yaml
 create mode 100644 inventory-coolstore-secret.yaml
 create mode 100644 inventory-coolstore-service.yaml
Enumerating objects: 8, done.
Counting objects: 100% (8/8), done.
Delta compression using up to 16 threads.
Compressing objects: 100% (7/7), done.
Writing objects: 100% (8/8), 2.47 KiB | 2.47 MiB/s, done.
Total 8 (delta 1), reused 0 (delta 0)
remote: . Processing 1 references
remote: Processed 1 references in total
To http://gitea-server.gitea.svc:3000/user%USER_ID%/gitops-cn-project.git
 * [new branch]      master -&gt; master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once done, in %GIT_URL%/user%USER_ID%/gitops-cn-project, <code><strong>refresh the page of your 'gitops-cn-project' repository</strong></code>. You should
see the files in the repository.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/gitea-inventory-gitops-repo.png" alt="GitOps Repository" width="900">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_is_argo_cd"><a class="anchor" href="#_what_is_argo_cd"></a>What is Argo CD?</h2>
<div class="sectionbody">
<div class="sidebarblock">
<div class="content">
<div class="imageblock">
<div class="content">
<img src="_images/argocd-logo.png" alt="Argo CD Logo" width="200">
</div>
</div>
<div class="paragraph">
<p><a href="https://argoproj.github.io/argo-cd/" target="_blank" rel="noopener">Argo CD</a> is a declarative, GitOps continuous delivery tool for Kubernetes.</p>
</div>
<div class="paragraph">
<p>It follows the GitOps pattern of using Git repositories as the source of truth for defining
the desired application state.</p>
</div>
<div class="paragraph">
<p>It automates the deployment of the desired application states in the specified target environments. Application
deployments can track updates to branches, tags, or pinned to a specific version of manifests at a Git commit.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_log_in_to_argo_cd"><a class="anchor" href="#_log_in_to_argo_cd"></a>Log in to Argo CD</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code><strong>Click on the below button called 'Developer GitOps'</strong></code></p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="%GITOPS_URL%" target="_blank" rel="noopener"><img src="_images/developer-gitops-button.png" alt="Developer GitOps - Button" width="300"></a>
</div>
</div>
<div class="paragraph">
<p>Then <code><strong>login via OpenShift as user%USER_ID%/%OPENSHIFT_PASSWORD%</strong></code>, <code><strong>click on 'Allow selected permissions'</strong></code></p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="_images/argocd-login-page.png" alt="Argo CD - Login Page" width="500">
</div>
</div>
<div class="paragraph">
<p>Once completed, you will be redirected to the following page.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/argocd-home.png" alt="Argo CD - Home Page" width="500">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_add_your_newly_created_gitops_repository"><a class="anchor" href="#_add_your_newly_created_gitops_repository"></a>Add your Newly Created GitOps Repository</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In %GITOPS_URL%[Argo CD^], <code><strong>Select the 'Configuration menu' then click on 'Repositories'</strong></code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/argocd-configure-repositories.png" alt="Argo CD - Configure Repositories" width="500">
</div>
</div>
<div class="paragraph">
<p><code><strong>Click on 'CONNECT REPO USING HTTPS'</strong></code> and enter the following:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Repository Configuration</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">git</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repository URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://gitea-server.gitea.svc:3000/user%USER_ID%/gitops-cn-project.git" class="bare">http://gitea-server.gitea.svc:3000/user%USER_ID%/gitops-cn-project.git</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Finally, <code><strong>Click on 'CONNECT'</strong></code>.</p>
</div>
<div class="paragraph">
<p>Your GitOps repository is now added to Argo CD.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/argocd-repository.png" alt="Argo CD - Repository" width="800">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_gitops_application"><a class="anchor" href="#_create_a_gitops_application"></a>Create a GitOps Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In %GITOPS_URL%[Argo CD^], <code><strong>Select the 'Application menu' then click on '+ New App'</strong></code> and enter the following details:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/argocd-configure-application.png" alt="Argo CD - Configure Application" width="500">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Application Configuration</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Section</th>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GENERAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cn-project%USER_ID%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GENERAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Project</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GENERAL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SYNC POLICY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manual</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SOURCE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Repository URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://gitea-server.gitea.svc:3000/user%USER_ID%/gitops-cn-project.git" class="bare">http://gitea-server.gitea.svc:3000/user%USER_ID%/gitops-cn-project.git</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SOURCE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Revision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HEAD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SOURCE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">. <em>(dot)</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DESTINATION</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cluster</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://kubernetes.default.svc" class="bare">https://kubernetes.default.svc</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DESTINATION</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cn-project%USER_ID%</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ALL OTHER SECTIONS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>leave them empty/by default</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Finally, <code><strong>Click on 'CREATE'</strong></code>.</p>
</div>
<div class="paragraph">
<p>Your Coolstore Application has been created in Argo CD.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/argocd-outofsync-application.png" alt="Argo CD - OutOfSync Application" width="700">
</div>
</div>
<div class="paragraph">
<p>The application status is initially in yellow <strong>OutOfSync</strong> state since the application has yet to be
deployed into cn-project%USER_ID% OpenShift project, and no Kubernetes resources have been created.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/argocd-outofsync-inventory-details.png" alt="Argo CD - OutOfSync Application" width="900">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deploy_a_resource_on_openshift"><a class="anchor" href="#_deploy_a_resource_on_openshift"></a>Deploy a Resource on OpenShift</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In %GITOPS_URL%[Argo CD^], <code><strong>click on the 3 points at the left of the 'CM Inventory' resource then select 'Sync'</strong></code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/argocd-cm-inventory-sync.png" alt="Argo CD - CM Inventory Sync" width="700">
</div>
</div>
<div class="paragraph">
<p>Then <code><strong>click on the 'Synchonize' button</strong></code>. Now the ConfigMap of Inventory has been deployed and synchronized
with your environment.</p>
</div>
<div class="paragraph">
<p>In the %OPENSHIFT_CONSOLE_URL%/topology/ns/cn-project%USER_ID%[OpenShift Web Console^], from the <strong>Developer view</strong>,
<code><strong>select your 'cn-project%USER_ID%'</strong></code> and `*click on 'Config Maps'. You should find the resource you just
deployed via Argo CD.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/openshift-cm-inventory-deployed.png" alt="OpenShift - CM Inventory Deployed" width="500">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_recover_from_a_configuration_drift"><a class="anchor" href="#_recover_from_a_configuration_drift"></a>Recover from a Configuration Drift</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <em>Configuration Drift</em> is a term used whenever someone makes ad hoc changes in a (production) environment
which are not recorded or tracked.</p>
</div>
<div class="paragraph">
<p>In the %OPENSHIFT_CONSOLE_URL%/topology/ns/cn-project%USER_ID%[OpenShift Web Console^], from the <strong>Developer view</strong>,
<code><strong>select your 'cn-project%USER_ID%'</strong></code> and <code><strong>click on 'Config Maps' &#8594; 'CM inventory' &#8594; 'YAML'</strong></code>.</p>
</div>
<div class="paragraph">
<p><code><strong>Add the following line in your configuration then click on 'Save'</strong></code></p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">simple.adhoc.change=This is a configuration drift</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/openshift-cm-inventory-drift.png" alt="OpenShift - CM Inventory Configuration Drift" width="900">
</div>
</div>
<div class="paragraph">
<p>In %GITOPS_URL%[Argo CD^], the 'CM Inventory' resource is no longer synchronized.
<code><strong>Click on it then select 'Diff' tab and check 'Compact diff'</strong></code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/argocd-cm-inventory-diff.png" alt="Argo CD - CM Inventory Diff" width="700">
</div>
</div>
<div class="paragraph">
<p>Argo CD detects automatically your modification which is not compliant with the desired state described in
Git, the source of truth. Indeed, from now, when you want to change the configuration, you will have to update
the Git Repository first to record and track your changes and so to avoid <em>configuration drifts</em>.</p>
</div>
<div class="paragraph">
<p>You can leave the configuration drift as it is. You will fix it in the next lab.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_push_the_coolstore_configuration_to_the_git_repository"><a class="anchor" href="#_push_the_coolstore_configuration_to_the_git_repository"></a>Push the Coolstore Configuration to the Git Repository</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To prepare the next lab, you need to push, on the Git repository, the configuration of the other services of the coolstore application.</p>
</div>
<div class="paragraph">
<p>In your %CHE_URL%[Workspace^], <code><strong>click on 'Terminal' &#8594; 'Run Task&#8230;&#8203;' &#8594;  'GitOps - Commit Coolstore'</strong></code></p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/che-runtask.png" alt="Che - RunTask" width="500">
</div>
</div>
<div class="paragraph">
<p>A terminal should be opened with the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">Reinitialized existing Git repository in /projects/gitops/.git/
[master 7d5e824] Initial Coolstore GitOps
 18 files changed, 612 insertions(+)
 [...]
Enumerating objects: 15, done.
Counting objects: 100% (15/15), done.
Delta compression using up to 16 threads.
Compressing objects: 100% (14/14), done.
Writing objects: 100% (14/14), 3.80 KiB | 3.80 MiB/s, done.
Total 14 (delta 8), reused 0 (delta 0)
remote: . Processing 1 references
remote: Processed 1 references in total
To http://gitea-server.gitea.svc:3000/user%USER_ID%/gitops-cn-project.git
   d35eafe..7d5e824  master -&gt; master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once done, in %GIT_URL%/user%USER_ID%/gitops-cn-project, <code><strong>refresh the page of your 'gitops-cn-project' repository</strong></code>. You should
see the project files in the repository.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/gitea-gitops-repo.png" alt="GitOps Repository" width="900">
</div>
</div>
<div class="paragraph">
<p>In %GITOPS_URL%[Argo CD^], the application status  is once again in yellow <strong>OutOfSync</strong> state since the Catalog, Gateway and Web services
have not yet been deployed into cn-project%USER_ID% OpenShift project.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/argocd-outofsync-coolstore-details.png" alt="Argo CD - OutOfSync Application" width="700">
</div>
</div>
<div class="paragraph">
<p><strong>You are going to fix it in the next lab.</strong></p>
</div>
<div class="paragraph">
<p>Well done! You are ready for the next lab.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="continuous-integration.html" class="query-params-link">3. Continuous Integration with Openshift Pipelines</a></span>
  <span class="next"><a href="continuous-delivery.html" class="query-params-link">5. Continuous Delivery with Openshift Pipelines</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
